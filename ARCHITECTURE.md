# ğŸ—ï¸ Architecture Documentation - AI-MCP Orchestrator

This document provides a detailed technical overview of the system architecture.

---

## ğŸ“ System Architecture

### **High-Level Overview**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                          â”‚
â”‚                    (React + Tailwind + Framer)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   ChatBox    â”‚  â”‚  MCP Panel   â”‚  â”‚   Sidebar    â”‚         â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚         â”‚
â”‚  â”‚ - Messages   â”‚  â”‚ - Tool Cards â”‚  â”‚ - History    â”‚         â”‚
â”‚  â”‚ - Input      â”‚  â”‚ - Toggles    â”‚  â”‚ - Sessions   â”‚         â”‚
â”‚  â”‚ - Markdown   â”‚  â”‚ - Status     â”‚  â”‚ - Clear      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                â”‚
              REST API          WebSocket
                    â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FASTAPI BACKEND                              â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                  API LAYER                               â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚    â”‚
â”‚  â”‚  â”‚   Chat     â”‚ â”‚    MCP     â”‚ â”‚  Memory    â”‚          â”‚    â”‚
â”‚  â”‚  â”‚  Routes    â”‚ â”‚  Routes    â”‚ â”‚  Routes    â”‚          â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚              LANGGRAPH ORCHESTRATION                   â”‚      â”‚
â”‚  â”‚                                                         â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚      â”‚
â”‚  â”‚  â”‚           State Graph Workflow               â”‚     â”‚      â”‚
â”‚  â”‚  â”‚                                              â”‚     â”‚      â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚     â”‚      â”‚
â”‚  â”‚  â”‚  â”‚ Analyze  â”‚â”€â”€â”€â–¶â”‚  Route   â”‚              â”‚     â”‚      â”‚
â”‚  â”‚  â”‚  â”‚ Intent   â”‚    â”‚  Tools   â”‚              â”‚     â”‚      â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜              â”‚     â”‚      â”‚
â”‚  â”‚  â”‚                         â”‚                    â”‚     â”‚      â”‚
â”‚  â”‚  â”‚                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”             â”‚     â”‚      â”‚
â”‚  â”‚  â”‚                    â”‚ Execute  â”‚             â”‚     â”‚      â”‚
â”‚  â”‚  â”‚                    â”‚  Tools   â”‚             â”‚     â”‚      â”‚
â”‚  â”‚  â”‚                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜             â”‚     â”‚      â”‚
â”‚  â”‚  â”‚                         â”‚                    â”‚     â”‚      â”‚
â”‚  â”‚  â”‚                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”             â”‚     â”‚      â”‚
â”‚  â”‚  â”‚                    â”‚ Generate â”‚             â”‚     â”‚      â”‚
â”‚  â”‚  â”‚                    â”‚ Response â”‚             â”‚     â”‚      â”‚
â”‚  â”‚  â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚     â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                            â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚                  LLM AGENT                             â”‚      â”‚
â”‚  â”‚                                                         â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚      â”‚
â”‚  â”‚  â”‚         Google Gemini 2.0 Flash              â”‚     â”‚      â”‚
â”‚  â”‚  â”‚                                              â”‚     â”‚      â”‚
â”‚  â”‚  â”‚  - Intent Analysis                           â”‚     â”‚      â”‚
â”‚  â”‚  â”‚  - Response Generation                       â”‚     â”‚      â”‚
â”‚  â”‚  â”‚  - Conversation Memory                       â”‚     â”‚      â”‚
â”‚  â”‚  â”‚  - Context Management                        â”‚     â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                            â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚              TOOL REGISTRY                             â”‚      â”‚
â”‚  â”‚                                                         â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”       â”‚      â”‚
â”‚  â”‚  â”‚ Web  â”‚ â”‚ File â”‚ â”‚  DB  â”‚ â”‚Email â”‚ â”‚Drive â”‚       â”‚      â”‚
â”‚  â”‚  â”‚Searchâ”‚ â”‚ Mgr  â”‚ â”‚      â”‚ â”‚      â”‚ â”‚      â”‚       â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜       â”‚      â”‚
â”‚  â”‚                                                         â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”       â”‚      â”‚
â”‚  â”‚  â”‚Auto  â”‚ â”‚Memoryâ”‚ â”‚Analytâ”‚ â”‚  KB  â”‚ â”‚ API  â”‚       â”‚      â”‚
â”‚  â”‚  â”‚mationâ”‚ â”‚      â”‚ â”‚ics   â”‚ â”‚      â”‚ â”‚Integrâ”‚       â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚    MongoDB      â”‚
                   â”‚                 â”‚
                   â”‚ - Chat History  â”‚
                   â”‚ - Tool Logs     â”‚
                   â”‚ - Sessions      â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Request Flow

### **1. User Sends Message**

```
User Input
    â”‚
    â”œâ”€â–¶ ChatBox Component
    â”‚       â”‚
    â”‚       â”œâ”€â–¶ ChatContext (State)
    â”‚       â”‚
    â”‚       â””â”€â–¶ API Call (POST /api/chat/send)
    â”‚
    â””â”€â–¶ Backend Receives Request
```

### **2. Backend Processing**

```
FastAPI Endpoint
    â”‚
    â”œâ”€â–¶ LangGraph Pipeline
    â”‚       â”‚
    â”‚       â”œâ”€â–¶ Analyze Intent Node
    â”‚       â”‚       â”‚
    â”‚       â”‚       â””â”€â–¶ Gemini: "What does user want?"
    â”‚       â”‚
    â”‚       â”œâ”€â–¶ Route Tools Node
    â”‚       â”‚       â”‚
    â”‚       â”‚       â””â”€â–¶ Router: "Which tools needed?"
    â”‚       â”‚
    â”‚       â”œâ”€â–¶ Execute Tools Node (if needed)
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€â–¶ Tool 1 (e.g., Web Search)
    â”‚       â”‚       â”œâ”€â–¶ Tool 2 (e.g., File Manager)
    â”‚       â”‚       â””â”€â–¶ Collect Results
    â”‚       â”‚
    â”‚       â””â”€â–¶ Generate Response Node
    â”‚               â”‚
    â”‚               â””â”€â–¶ Gemini: "Create response with tool results"
    â”‚
    â””â”€â–¶ Return Response to Frontend
```

### **3. Frontend Updates**

```
API Response
    â”‚
    â”œâ”€â–¶ ChatContext Updates
    â”‚       â”‚
    â”‚       â”œâ”€â–¶ Add User Message
    â”‚       â”œâ”€â–¶ Add AI Response
    â”‚       â””â”€â–¶ Update Tool Results
    â”‚
    â””â”€â–¶ UI Re-renders
            â”‚
            â”œâ”€â–¶ New messages appear
            â”œâ”€â–¶ Tool indicators show
            â””â”€â–¶ Scroll to bottom
```

---

## ğŸ§© Component Architecture

### **Frontend Components**

```
App.jsx
â”‚
â”œâ”€â–¶ ChatProvider (Context)
â”‚   â””â”€â–¶ State: messages, sessionId, isLoading
â”‚
â”œâ”€â–¶ MCPProvider (Context)
â”‚   â””â”€â–¶ State: tools, activeTools, isLoading
â”‚
â”œâ”€â–¶ AIBrain (Background Animation)
â”‚   â”œâ”€â–¶ Gradient Orbs
â”‚   â”œâ”€â–¶ Floating Particles
â”‚   â””â”€â–¶ Grid Lines
â”‚
â”œâ”€â–¶ Header
â”‚   â”œâ”€â–¶ Logo
â”‚   â”œâ”€â–¶ Toggle Buttons
â”‚   â””â”€â–¶ Settings
â”‚
â”œâ”€â–¶ Sidebar
â”‚   â”œâ”€â–¶ New Chat Button
â”‚   â”œâ”€â–¶ Session List
â”‚   â””â”€â–¶ Clear Session Button
â”‚
â”œâ”€â–¶ ChatBox
â”‚   â”œâ”€â–¶ Messages Area
â”‚   â”‚   â”œâ”€â–¶ User Messages
â”‚   â”‚   â”œâ”€â–¶ AI Messages
â”‚   â”‚   â””â”€â–¶ Tool Results
â”‚   â”‚
â”‚   â””â”€â–¶ Input Area
â”‚       â”œâ”€â–¶ Textarea
â”‚       â”œâ”€â–¶ Send Button
â”‚       â””â”€â–¶ Active Tools Display
â”‚
â””â”€â–¶ MCPPanel
    â”œâ”€â–¶ Header
    â”œâ”€â–¶ Tool Grid
    â”‚   â””â”€â–¶ MCPCard (x10)
    â”‚       â”œâ”€â–¶ Icon
    â”‚       â”œâ”€â–¶ Name
    â”‚       â”œâ”€â–¶ Description
    â”‚       â””â”€â–¶ Status Indicator
    â”‚
    â””â”€â–¶ Stats
```

### **Backend Modules**

```
main.py (FastAPI App)
â”‚
â”œâ”€â–¶ Routes
â”‚   â”œâ”€â–¶ chat_routes.py
â”‚   â”‚   â”œâ”€â–¶ POST /api/chat/send
â”‚   â”‚   â”œâ”€â–¶ GET /api/chat/history/{session_id}
â”‚   â”‚   â”œâ”€â–¶ DELETE /api/chat/session/{session_id}
â”‚   â”‚   â””â”€â–¶ GET /api/chat/sessions
â”‚   â”‚
â”‚   â”œâ”€â–¶ mcp_routes.py
â”‚   â”‚   â”œâ”€â–¶ GET /api/mcp/tools
â”‚   â”‚   â”œâ”€â–¶ GET /api/mcp/tools/{tool_name}
â”‚   â”‚   â”œâ”€â–¶ POST /api/mcp/tools/toggle
â”‚   â”‚   â”œâ”€â–¶ POST /api/mcp/tools/execute
â”‚   â”‚   â””â”€â–¶ GET /api/mcp/tools/active
â”‚   â”‚
â”‚   â”œâ”€â–¶ memory_routes.py
â”‚   â”‚   â”œâ”€â–¶ GET /api/memory/logs
â”‚   â”‚   â””â”€â–¶ GET /api/memory/stats
â”‚   â”‚
â”‚   â””â”€â–¶ websocket_routes.py
â”‚       â””â”€â–¶ WS /api/ws/chat/{session_id}
â”‚
â”œâ”€â–¶ LangGraph Pipeline
â”‚   â”œâ”€â–¶ graph_builder.py
â”‚   â”‚   â”œâ”€â–¶ StateGraph Definition
â”‚   â”‚   â”œâ”€â–¶ Node Functions
â”‚   â”‚   â””â”€â–¶ Edge Conditions
â”‚   â”‚
â”‚   â”œâ”€â–¶ llm_agent.py
â”‚   â”‚   â”œâ”€â–¶ Gemini Integration
â”‚   â”‚   â”œâ”€â–¶ Conversation Memory
â”‚   â”‚   â””â”€â–¶ Intent Analysis
â”‚   â”‚
â”‚   â””â”€â–¶ router.py
â”‚       â”œâ”€â–¶ Tool Routing Logic
â”‚       â”œâ”€â–¶ Keyword Matching
â”‚       â””â”€â–¶ Tool Execution
â”‚
â”œâ”€â–¶ MCP Tools
â”‚   â”œâ”€â–¶ web_search_mcp.py
â”‚   â”œâ”€â–¶ file_manager_mcp.py
â”‚   â”œâ”€â–¶ db_mcp.py
â”‚   â”œâ”€â–¶ email_mcp.py
â”‚   â”œâ”€â–¶ drive_mcp.py
â”‚   â”œâ”€â–¶ automation_mcp.py
â”‚   â”œâ”€â–¶ memory_mcp.py
â”‚   â”œâ”€â–¶ analytics_mcp.py
â”‚   â”œâ”€â–¶ knowledgebase_mcp.py
â”‚   â””â”€â–¶ api_integration_mcp.py
â”‚
â”œâ”€â–¶ Services
â”‚   â””â”€â–¶ db_service.py
â”‚       â”œâ”€â–¶ MongoDB Connection
â”‚       â”œâ”€â–¶ Chat History
â”‚       â””â”€â–¶ Tool Logs
â”‚
â””â”€â–¶ Utils
    â””â”€â–¶ tool_registry.py
        â”œâ”€â–¶ Tool Registration
        â”œâ”€â–¶ Enable/Disable
        â””â”€â–¶ Tool Info
```

---

## ğŸ’¾ Data Models

### **Chat Message**

```python
{
    "session_id": "session_123",
    "role": "user" | "assistant",
    "content": "Message text",
    "timestamp": "2025-10-26T20:57:35+05:30",
    "metadata": {
        "tool_results": {...}
    }
}
```

### **MCP Tool**

```python
{
    "name": "web_search",
    "description": "Search the web using DuckDuckGo",
    "enabled": true,
    "schema": {
        "parameters": {...}
    }
}
```

### **Tool Execution Log**

```python
{
    "session_id": "session_123",
    "tool_name": "web_search",
    "action": "execute",
    "result": {
        "success": true,
        "data": {...}
    },
    "timestamp": "2025-10-26T20:57:35+05:30"
}
```

---

## ğŸ” Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Security Layers             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. CORS Protection                  â”‚
â”‚    - Whitelisted origins            â”‚
â”‚    - Credential handling            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. Environment Variables            â”‚
â”‚    - API keys in .env               â”‚
â”‚    - No hardcoded secrets           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. Input Validation                 â”‚
â”‚    - Pydantic models                â”‚
â”‚    - Type checking                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. Error Handling                   â”‚
â”‚    - Try-catch blocks               â”‚
â”‚    - Graceful degradation           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 5. Database Security                â”‚
â”‚    - Connection pooling             â”‚
â”‚    - Query sanitization             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Performance Optimization

### **Backend**

- **Async Operations:** All I/O is non-blocking
- **Connection Pooling:** MongoDB connections reused
- **Lazy Loading:** Tools initialized on demand
- **Caching:** (Planned) Redis for frequent queries

### **Frontend**

- **Code Splitting:** Vite automatic chunking
- **Lazy Components:** React.lazy for large components
- **Memoization:** useMemo and useCallback hooks
- **Optimistic Updates:** UI updates before API response

---

## ğŸ”„ State Management

### **Frontend State Flow**

```
User Action
    â”‚
    â”œâ”€â–¶ Component Event Handler
    â”‚       â”‚
    â”‚       â”œâ”€â–¶ Context Action
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€â–¶ API Call
    â”‚       â”‚       â”‚       â”‚
    â”‚       â”‚       â”‚       â””â”€â–¶ Backend Processing
    â”‚       â”‚       â”‚
    â”‚       â”‚       â””â”€â–¶ Update Context State
    â”‚       â”‚
    â”‚       â””â”€â–¶ Component Re-renders
    â”‚
    â””â”€â–¶ UI Updates
```

---

## ğŸŒ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Production Setup             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Frontend  â”‚    â”‚  Backend   â”‚  â”‚
â”‚  â”‚  (Vercel)  â”‚â—€â”€â”€â–¶â”‚ (Railway)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚          â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                    â”‚  MongoDB   â”‚   â”‚
â”‚                    â”‚  (Atlas)   â”‚   â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Scalability

### **Horizontal Scaling**

```
Load Balancer
    â”‚
    â”œâ”€â–¶ Backend Instance 1
    â”œâ”€â–¶ Backend Instance 2
    â””â”€â–¶ Backend Instance 3
            â”‚
            â””â”€â–¶ Shared MongoDB
```

### **Vertical Scaling**

- Increase server resources
- Optimize database queries
- Enable caching layer

---

## ğŸ§ª Testing Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Testing Pyramid            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         E2E Tests               â”‚
â”‚      (Playwright/Cypress)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Integration Tests           â”‚
â”‚    (API + Database)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       Unit Tests                â”‚
â”‚  (Components + Functions)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š Technology Decisions

| Decision | Rationale |
|----------|-----------|
| **FastAPI** | Async support, auto docs, type safety |
| **Gemini 2.0 Flash** | Latest model, fast responses, cost-effective |
| **LangGraph** | Flexible orchestration, state management |
| **React** | Component reusability, large ecosystem |
| **Tailwind CSS** | Rapid development, consistent styling |
| **MongoDB** | Flexible schema, good for chat data |
| **WebSocket** | Real-time bidirectional communication |

---

**For implementation details, see the source code and inline documentation.**
